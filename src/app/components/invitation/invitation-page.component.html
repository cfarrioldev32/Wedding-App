<main class="invitation-page">
  <section class="invitation-shell">
    <img class="stamp stamp-left" [src]="POSTAL_STAMP_PATH" alt="" aria-hidden="true" />
    <img class="stamp stamp-right" [src]="POSTAL_STAMP_PATH" alt="" aria-hidden="true" />

    <div class="invitation-content">
    <header class="hero">
      <p class="hero-eyebrow">Nos Casamos</p>
      <h1 class="hero-title">Cristian & Carmen</h1>
      <div class="hero-ornament" aria-hidden="true"></div>
      <p class="hero-date">17 de octubre de 2026</p>
    </header>

    <div class="section-separator" aria-hidden="true"></div>

    <section class="couple-photo">
      <img src="/cyc.png" alt="Cristian y Carmen" />
    </section>

    <section class="countdown-section" aria-label="Cuenta regresiva">
      <h2 class="section-title script">
        <span class="section-icon" aria-hidden="true">⏳</span>
        Cuenta regresiva
      </h2>
      <app-countdown [targetDate]="targetDate"></app-countdown>
    </section>

    <section class="location-section">
      <h2 class="section-title script">
        <span class="section-icon" aria-hidden="true">📍</span>
        Celebración
      </h2>
      <div class="location-photo" aria-hidden="true">
        <img src="/OLIVAR.png" alt="" />
      </div>
      <p class="section-text">
        La ceremonia se celebrará en
        <span class="location-highlight">{{ CEREMONY_NAME }}</span>,
        en <span class="location-highlight">{{ CEREMONY_CITY }}</span>.
      </p>
      <p class="section-text"><strong>Dirección:</strong> {{ ceremonyAddress }}</p>
      <a
        class="maps-cta"
        [class.disabled]="!mapsUrl"
        [attr.href]="mapsUrl || null"
        [attr.tabindex]="mapsUrl ? 0 : -1"
        [attr.aria-disabled]="!mapsUrl"
        target="_blank"
        rel="noopener"
      >
        <span class="pin-icon" aria-hidden="true">📍</span>
        Abrir en Google Maps
      </a>
      <p class="section-helper" *ngIf="!mapsUrl">Ubicación exacta a confirmar.</p>
    </section>

    <section class="dress-section">
      <h2 class="section-title script">
        <span class="section-icon" aria-hidden="true">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="1.6"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="icon-hanger"
          >
            <path d="M12 7a2.5 2.5 0 1 0-2.5-2.5" />
            <path d="M9.5 9.5 2 16h20l-7.5-6.5" />
          </svg>
        </span>
        Dress Code
      </h2>
      <p class="section-text">{{ dressCode }}</p>
      <p class="section-subtext">Sugerimos tonos neutros y un look elegante.</p>
    </section>

    <section class="timeline-section" aria-label="Itinerario">
      <h2 class="section-title script">
        <span class="section-icon" aria-hidden="true">🕘</span>
        Itinerario
      </h2>
      <div class="timeline">
        <div class="timeline-line" aria-hidden="true"></div>
        <div class="timeline-item" *ngFor="let item of itinerary; let idx = index">
          <div class="timeline-time">{{ item.time }}</div>
          <div class="timeline-center" aria-hidden="true">
            <span class="timeline-dot"></span>
          </div>
          <div class="timeline-content">
            <span class="timeline-label" [class.script]="item.label === 'Ceremonia' || item.label === 'Fiesta'">
              {{ item.label }}
            </span>
          </div>
          <span class="timeline-icon" [ngSwitch]="item.icon" aria-hidden="true">
            <svg *ngSwitchCase="'arrival'" viewBox="0 0 24 24">
              <path d="M3 12 H21" stroke="currentColor" stroke-width="1.5" />
              <path d="M8 6 L12 3 L16 6" stroke="currentColor" stroke-width="1.5" fill="none" />
            </svg>
            <svg *ngSwitchCase="'rings'" viewBox="0 0 24 24">
              <circle cx="9" cy="12" r="4.5" stroke="currentColor" stroke-width="1.5" fill="none" />
              <circle cx="15" cy="12" r="4.5" stroke="currentColor" stroke-width="1.5" fill="none" />
            </svg>
            <svg *ngSwitchCase="'music'" viewBox="0 0 24 24">
              <path d="M9 18 C9 19.7 7.7 21 6 21 C4.3 21 3 19.7 3 18 C3 16.3 4.3 15 6 15 C7.7 15 9 16.3 9 18 Z" stroke="currentColor" stroke-width="1.5" fill="none" />
              <path d="M9 18 V6 L20 4 V16" stroke="currentColor" stroke-width="1.5" fill="none" />
              <circle cx="18" cy="18" r="3" stroke="currentColor" stroke-width="1.5" fill="none" />
            </svg>
          </span>
        </div>
      </div>
    </section>

    <section class="gift-section">
      <h2 class="section-title script">
        <span class="section-icon" aria-hidden="true">🎁</span>
        {{ giftInfo.title }}
      </h2>
      <p class="section-text centered">{{ giftInfo.text }}</p>
      <div class="gift-info">
        <div class="iban-row">
          <span class="iban-label"><strong>IBAN:</strong></span>
          <span class="iban-value">{{ giftInfo.iban }}</span>
          <button
            class="iban-copy"
            type="button"
            (click)="copyIban()"
            [attr.aria-label]="ibanCopied ? 'IBAN copiado' : 'Copiar IBAN'"
          >
            <span class="copy-icon" aria-hidden="true">
              <span class="copy-sheet copy-sheet--back"></span>
              <span class="copy-sheet copy-sheet--front"></span>
            </span>
          </button>
        </div>
        <p class="iban-helper" *ngIf="ibanCopied">IBAN copiado al portapapeles.</p>
      </div>
    </section>

    <footer class="cta">
      <a
        mat-stroked-button
        color="primary"
        class="calendar-link primary"
        [href]="googleCalendarLink"
        target="_blank"
        rel="noopener"
      >
        Guardar en calendario
      </a>
      <button mat-stroked-button color="primary" routerLink="/stepper">Volver</button>
    </footer>

    <button
      *ngIf="showMusicButton"
      class="music-toggle"
      type="button"
      (click)="toggleMusic()"
      [attr.aria-label]="isMusicPlaying ? 'Pausar musica' : 'Reproducir musica'"
    >
      <span aria-hidden="true">{{ isMusicPlaying ? '🔇' : '🎵' }}</span>
    </button>
    </div>
  </section>
</main>
