<main class="invitation-page">
  <section class="invitation-shell">
    <img class="stamp stamp-left" [src]="POSTAL_STAMP_PATH" alt="" aria-hidden="true" />
    <img class="stamp stamp-right" [src]="POSTAL_STAMP_PATH" alt="" aria-hidden="true" />

    <div class="invitation-content">
    <header class="hero">
      <p class="hero-eyebrow">Nos Casamos..</p>
      <p class="hero-destination">¿Nos acompañas?</p>
      <h1 class="hero-title">Carmen & Cristian</h1>
      <div class="hero-ornament" aria-hidden="true"></div>
      <p class="hero-date">17 de octubre de 2026</p>
    </header>

    <div class="section-separator" aria-hidden="true"></div>

    <section class="couple-photo">
      <img src="/cyc.png" alt="Cristian y Carmen" />
    </section>

    <section class="countdown-section" aria-label="Cuenta regresiva" revealOnScroll>
      <h2 class="section-title script countdown-title">
        <span class="section-icon" aria-hidden="true">⏳</span>
        Cuenta regresiva
      </h2>
      <app-countdown [targetDate]="targetDate"></app-countdown>
    </section>

    <section class="location-section" revealOnScroll>
      <h2 class="section-title script">
        <span class="section-icon" aria-hidden="true">📍</span>
        Celebración
      </h2>
      <div class="location-photo" aria-hidden="true">
        <img src="/OLIVAR.png" alt="" />
      </div>
      <p class="section-text">
        La ceremonia se celebrará en
        <span class="location-highlight">{{ CEREMONY_NAME }}</span>,
        en <span class="location-highlight">{{ CEREMONY_CITY }}</span>.
      </p>
      <p class="section-text"><strong>Dirección:</strong> {{ ceremonyAddress }}</p>
      <a
        class="maps-cta"
        [class.disabled]="!mapsUrl"
        [attr.href]="mapsUrl || null"
        [attr.tabindex]="mapsUrl ? 0 : -1"
        [attr.aria-disabled]="!mapsUrl"
        target="_blank"
        rel="noopener"
      >
        <span class="pin-icon" aria-hidden="true">📍</span>
        Abrir en Google Maps
      </a>
      <p class="section-helper" *ngIf="!mapsUrl">Ubicación exacta a confirmar.</p>
    </section>

    <section class="dress-section" revealOnScroll>
      <h2 class="section-title script">
        <span class="section-icon" aria-hidden="true">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="1.6"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="icon-hanger"
          >
            <path d="M12 7a2.5 2.5 0 1 0-2.5-2.5" />
            <path d="M9.5 9.5 2 16h20l-7.5-6.5" />
          </svg>
        </span>
        Dress Code
      </h2>
      <p class="section-subtext">Elegante pero cómodo para darlo todo en la pista (corbata opcional, sonrisa obligatoria)</p>
    </section>

    <section class="timeline-section" aria-label="Itinerario" revealOnScroll>
      <h2 class="section-title script">
        <span class="section-icon" aria-hidden="true">🕘</span>
        Itinerario
      </h2>
      <img class="timeline-image" src="/itinerario.png" alt="Itinerario del evento" />
    </section>

    <section class="polaroid-section" aria-label="Recuerdos" revealOnScroll>
      <h2 class="section-title script">
        <span class="section-icon" aria-hidden="true">📷</span>
        Recuerdos
      </h2>
      <div
        class="polaroid-carousel"
        (mouseenter)="pausePolaroidAutoplay()"
        (mouseleave)="resumePolaroidAutoplay()"
      >
        <button
          class="polaroid-nav polaroid-nav--prev"
          type="button"
          (click)="pausePolaroidAutoplay(); scrollPolaroids(-1)"
          aria-label="Ver fotos anteriores"
        >
          ‹
        </button>
        <div
          class="polaroid-track"
          #polaroidTrack
          tabindex="0"
          (keydown)="onPolaroidKeydown($event)"
          (pointerdown)="pausePolaroidAutoplay()"
          (wheel)="pausePolaroidAutoplay()"
          (focusin)="pausePolaroidAutoplay()"
        >
          <figure class="polaroid-card" *ngFor="let photo of polaroidImages" [style.--tilt]="photo.tilt">
            <div class="polaroid-frame">
              <img [src]="'/assets/polaroid/' + photo.file" [alt]="photo.alt" loading="lazy" />
            </div>
          </figure>
        </div>
        <button
          class="polaroid-nav polaroid-nav--next"
          type="button"
          (click)="pausePolaroidAutoplay(); scrollPolaroids(1)"
          aria-label="Ver fotos siguientes"
        >
          ›
        </button>
      </div>
    </section>

    <section class="gift-section" revealOnScroll>
      <h2 class="section-title script">
        <span class="section-icon" aria-hidden="true">🎁</span>
        {{ giftInfo.title }}
      </h2>
      <p class="section-text centered">{{ giftInfo.text }}</p>
      <div class="gift-info">
        <div class="iban-row">
          <span class="iban-label"><strong>IBAN:</strong></span>
          <span class="iban-value">{{ giftInfo.iban }}</span>
          <button
            class="iban-copy"
            type="button"
            (click)="copyIban()"
            [attr.aria-label]="ibanCopied ? 'IBAN copiado' : 'Copiar IBAN'"
          >
            <span class="copy-icon" aria-hidden="true">
              <span class="copy-sheet copy-sheet--back"></span>
              <span class="copy-sheet copy-sheet--front"></span>
            </span>
          </button>
        </div>
        <p class="iban-helper" *ngIf="ibanCopied">IBAN copiado al portapapeles.</p>
      </div>
    </section>

    <footer class="cta" revealOnScroll>
      <a
        mat-stroked-button
        color="primary"
        class="calendar-link primary"
        [href]="googleCalendarLink"
        target="_blank"
        rel="noopener"
      >
        Guardar en calendario
      </a>
      <button mat-stroked-button color="primary" routerLink="/stepper">Volver</button>
    </footer>

    <button
      *ngIf="showMusicButton"
      class="music-toggle"
      type="button"
      (click)="toggleMusic()"
      [attr.aria-label]="isMusicPlaying ? 'Pausar musica' : 'Reproducir musica'"
    >
      <span aria-hidden="true">{{ isMusicPlaying ? '🔇' : '🎵' }}</span>
    </button>
    </div>
  </section>
</main>
