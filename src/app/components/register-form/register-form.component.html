<section class="register-page">
  <div class="hero">
    <div class="hero-media" [class.map-debug]="debugAnchors">
      <div class="hero-overlay"></div>
      <span #anchorAr class="map-anchor map-anchor--ar" aria-hidden="true"></span>
      <span #anchorEs class="map-anchor map-anchor--es" aria-hidden="true"></span>
      <app-travel-hero-animation
        [durationSeconds]="6.5"
        [anchorAr]="anchorArRef"
        [anchorEs]="anchorEsRef"
        [debug]="debugAnchors"
      ></app-travel-hero-animation>
      <div class="hero-text">
        <p class="hero-eyebrow">Bienvenidos a nuestra boda</p>
        <h1 class="hero-title">Cristian & Carmen</h1>
        <p class="hero-subtitle">Argentina & Espana</p>
      </div>
    </div>
  </div>

  <div class="form-shell">
    <div class="passport-scene" [class.is-opening]="isOpening">
      <div class="passport-book" [class.is-stamping]="isStamping">
      <div class="stamp-overlay" aria-hidden="true">
        <div class="stamp-tool">
          <img src="/sello.png" alt="" />
        </div>
        <div class="stamp-imprint">QUE COMIENCE EL VIAJE</div>
      </div>
      <div class="passport-fold" aria-hidden="true"></div>

      <section class="passport-page passport-left passport-cover" aria-hidden="true">
        <div class="passport-title-block">
          <p class="passport-title">Pasaporte</p>
          <p class="passport-subtitle">Registro de invitado</p>
        </div>

        <div class="passport-photo">
          <div class="photo-placeholder">Foto</div>
        </div>

        <div class="passport-meta">
          <p><span>Authority</span> AR-ES UNION</p>
          <p><span>Document No.</span> WED-2026</p>
          <p><span>Nationality</span> ARG / ESP</p>
          <p><span>Place of issue</span> Alcala de Henares</p>
        </div>

        <div class="passport-lines">
          <span></span>
          <span></span>
          <span></span>
        </div>

        <div class="passport-mrz">
          P&lt;ESP&lt;&lt;CRISTIAN&lt;CARMEN&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
        </div>
      </section>

      <section class="passport-page passport-right">
        <div class="form-header">
          <div class="stamp" aria-hidden="true">
            <img src="/sello.png" alt="" />
          </div>
          <p class="form-eyebrow">Confirmacion</p>
          <h2 class="form-title">Nos encantaria contar con vos</h2>
          <p class="form-subtitle">Completa tus datos para reservar tu lugar.</p>
        </div>

        <div class="existing-session" *ngIf="hasExistingSession">
          <p class="existing-title">Ya completaste el formulario.</p>
          <p class="existing-text">Correo: <strong>{{ existingSessionEmail }}</strong></p>
          <p class="existing-text" *ngIf="existingScoreText">
            Puntaje: <strong>{{ existingScoreText }}</strong>
          </p>
          <p class="existing-text" *ngIf="existingRankingText">
            Resultado: <strong>{{ existingRankingText }}</strong>
          </p>
          <a mat-stroked-button color="primary" routerLink="/invitation" class="primary-cta">
            Ir a la invitacion
          </a>
        </div>

        <form
          *ngIf="!hasExistingSession"
          [formGroup]="registroForm"
          (ngSubmit)="registrar()"
          class="form-grid"
        >
          <label class="passport-field">
            <span>Nombre</span>
            <input type="text" formControlName="nombre" placeholder="Tu nombre" />
          </label>

          <label class="passport-field">
            <span>Apellido</span>
            <input type="text" formControlName="apellido" placeholder="Tu apellido" />
          </label>

          <label class="passport-field">
            <span>Email</span>
            <input type="email" formControlName="email" placeholder="tu@mail.com" />
          </label>

          <label class="passport-field">
            <span>Pais de origen</span>
            <input type="text" formControlName="pais" placeholder="Argentina, Espana..." />
          </label>

          <button
            type="submit"
            mat-flat-button
            color="primary"
            class="primary-cta"
            [disabled]="isStamping"
          >
            Registrarse
          </button>
        </form>
      </section>
      </div>
    </div>
  </div>
</section>
